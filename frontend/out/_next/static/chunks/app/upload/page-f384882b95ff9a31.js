(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{6514:(e,s,a)=>{Promise.resolve().then(a.bind(a,26225))},26225:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var l=a(95155),n=a(12115),i=a(13804),r=a(52987),t=a(52619),c=a.n(t),d=a(3998),x=a(86948),m=a(71983),o=a(45849),h=a(11636),u=a(42529),j=a(21786),p=a(92001),N=a(6132),g=a(18332),v=a(6143),y=a(88566);let f=e=>{var s;let{onFileSelect:a,isUploading:i=!1,progress:r=0,error:t=null,isSuccess:c=!1,disabled:f=!1}=e,b=(0,n.useCallback)((e,s)=>{!(s.length>0)&&e.length>0&&a(e[0])},[a]),{getRootProps:_,getInputProps:w,isDragActive:A,isDragReject:S}=(0,h.VB)({onDrop:b,accept:{"application/octet-stream":[".h5ad"]},maxSize:y.p1.maxSizeBytes,multiple:!1,disabled:f||i});return(0,l.jsxs)("div",{className:"w-full space-y-4",children:[(0,l.jsxs)(x.Zp,(0,o._)((0,m._)({},_()),{className:"\n          relative cursor-pointer border-2 border-dashed p-8 text-center transition-colors\n          ".concat(A&&!S?"border-blue-500 bg-blue-50":"","\n          ").concat(S?"border-red-500 bg-red-50":"","\n          ").concat(i||f?"cursor-not-allowed opacity-50":"","\n          ").concat(c?"border-green-500 bg-green-50":"border-gray-300","\n          hover:border-gray-400 hover:bg-gray-50\n        "),children:[(0,l.jsx)("input",(0,m._)({},w())),(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[c?(0,l.jsx)(u.A,{className:"h-12 w-12 text-green-500"}):(0,l.jsx)(j.A,{className:"h-12 w-12 text-gray-400"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:c?"File Uploaded Successfully!":"Upload AnnData File"}),!c&&(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsx)("p",{children:A?"Drop the file here...":"Drag & drop your .h5ad file here, or click to browse"}),(0,l.jsxs)("p",{className:"mt-1",children:["Maximum file size: ",(s=y.p1.maxSizeBytes,"".concat((s/1048576).toFixed(1)," MB"))]})]})]}),!c&&!i&&(0,l.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Choose File"]})]})]})),i&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{children:"Uploading..."}),(0,l.jsxs)("span",{children:[r,"%"]})]}),(0,l.jsx)(v.k,{value:r})]}),t&&(0,l.jsxs)(g.Fc,{variant:"destructive",children:[(0,l.jsx)(N.A,{className:"h-4 w-4"}),(0,l.jsx)(g.TN,{children:t})]})]})};var b=a(11647),_=a(27830);let w=e=>{var s,a,n,i,r,t,c,d,m,o,h,u,j,p,N,g,v,y,f,w;let{dataSummary:A}=e,S=e=>e.toLocaleString(),B=e=>void 0===e?"N/A":"".concat((100*e).toFixed(1),"%");return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsxs)(x.ZB,{className:"flex items-center justify-between",children:["Dataset Overview",(0,l.jsx)(b.E,{variant:"secondary",children:(0,_.m)(new Date(A.loaded_at),{addSuffix:!0})})]}),(0,l.jsx)(x.BT,{children:A.filename&&"File: ".concat(A.filename)})]}),(0,l.jsx)(x.Wu,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:S(A.shape.n_obs)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Cells"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:S(A.shape.n_vars)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Genes"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(e=>e?e<1?"".concat((1024*e).toFixed(1)," KB"):"".concat(e.toFixed(1)," MB"):"Unknown")(A.file_size_mb)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"File Size"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Object.keys(A.layers).length+1}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Layers"})]})]})})]}),(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsx)(x.ZB,{children:"Main Data Layer (X)"}),(0,l.jsx)(x.BT,{children:"Primary expression matrix"})]}),(0,l.jsx)(x.Wu,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Data Type:"}),(0,l.jsx)("div",{className:"text-gray-600",children:A.X_info.dtype})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Sparsity:"}),(0,l.jsx)("div",{className:"text-gray-600",children:B(A.X_info.sparsity_ratio)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Min Value:"}),(0,l.jsx)("div",{className:"text-gray-600",children:null!=(h=null==(s=A.X_info.min_val)?void 0:s.toFixed(2))?h:"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Max Value:"}),(0,l.jsx)("div",{className:"text-gray-600",children:null!=(u=null==(a=A.X_info.max_val)?void 0:a.toFixed(2))?u:"N/A"})]})]})})]}),Object.keys(A.layers).length>0&&(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsx)(x.ZB,{children:"Additional Layers"}),(0,l.jsx)(x.BT,{children:"Extra data matrices in the dataset"})]}),(0,l.jsx)(x.Wu,{children:(0,l.jsx)("div",{className:"space-y-3",children:Object.entries(A.layers).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"font-medium",children:s}),(0,l.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-600",children:[(0,l.jsx)("span",{children:a.dtype}),(0,l.jsxs)("span",{children:[B(a.sparsity_ratio)," sparse"]})]})]},s)})})})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsxs)(x.ZB,{children:["Cell Annotations (",A.obs_columns.length,")"]}),(0,l.jsx)(x.BT,{children:"Metadata columns for cells"})]}),(0,l.jsxs)(x.Wu,{className:"space-y-2",children:[A.obs_columns.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("span",{className:"text-gray-600",children:[e.n_unique," unique (",e.dtype,")"]})]},e.name)),A.obs_columns.length>5&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",A.obs_columns.length-5," more"]})]})]}),(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsxs)(x.ZB,{children:["Gene Annotations (",A.var_columns.length,")"]}),(0,l.jsx)(x.BT,{children:"Metadata columns for genes"})]}),(0,l.jsxs)(x.Wu,{className:"space-y-2",children:[A.var_columns.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("span",{className:"text-gray-600",children:[e.n_unique," unique (",e.dtype,")"]})]},e.name)),A.var_columns.length>5&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",A.var_columns.length-5," more"]})]})]})]}),A.qc_metrics&&(0,l.jsxs)(x.Zp,{children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsx)(x.ZB,{children:"Quality Control Metrics"}),(0,l.jsx)(x.BT,{children:"Basic QC statistics for the dataset"})]}),(0,l.jsx)(x.Wu,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Genes per Cell"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(j=null==(n=A.qc_metrics.n_genes_by_counts.mean)?void 0:n.toFixed(0))?j:"N/A"," \xb1 "," ",null!=(p=null==(i=A.qc_metrics.n_genes_by_counts.std)?void 0:i.toFixed(0))?p:"N/A"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Total Counts"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(N=null==(r=A.qc_metrics.total_counts.mean)?void 0:r.toFixed(0))?N:"N/A"," \xb1 "," ",null!=(g=null==(t=A.qc_metrics.total_counts.std)?void 0:t.toFixed(0))?g:"N/A"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"MT Gene %"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(v=null==(c=A.qc_metrics.pct_counts_mt.mean)?void 0:c.toFixed(1))?v:"N/A","% \xb1 "," ",null!=(y=null==(d=A.qc_metrics.pct_counts_mt.std)?void 0:d.toFixed(1))?y:"N/A","%"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Ribosomal %"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(f=null==(m=A.qc_metrics.pct_counts_ribo.mean)?void 0:m.toFixed(1))?f:"N/A","% \xb1 "," ",null!=(w=null==(o=A.qc_metrics.pct_counts_ribo.std)?void 0:o.toFixed(1))?w:"N/A","%"]})]})]})})]})]})};var A=a(61894);function S(){let{isUploading:e,progress:s,error:a,dataSummary:t,isSuccess:h,uploadFile:u,reset:j}=(()=>{let[e,s]=(0,n.useState)({isUploading:!1,progress:0,error:null,dataSummary:null,isSuccess:!1}),a=(0,n.useCallback)(async e=>{s({isUploading:!0,progress:0,error:null,dataSummary:null,isSuccess:!1});try{s(e=>(0,o._)((0,m._)({},e),{progress:10}));let a=await A.FH.uploadData(e);s(e=>(0,o._)((0,m._)({},e),{progress:90})),a.success&&a.data_summary?s({isUploading:!1,progress:100,error:null,dataSummary:a.data_summary,isSuccess:!0}):s({isUploading:!1,progress:0,error:a.message||"Upload failed",dataSummary:null,isSuccess:!1})}catch(e){s({isUploading:!1,progress:0,error:e instanceof Error?e.message:"Upload failed",dataSummary:null,isSuccess:!1})}},[]),l=(0,n.useCallback)(()=>{s({isUploading:!1,progress:0,error:null,dataSummary:null,isSuccess:!1})},[]);return(0,o._)((0,m._)({},e),{uploadFile:a,reset:l})})();return(0,l.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Upload Your Dataset"}),(0,l.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Upload your single-cell RNA sequencing data in AnnData (.h5ad) format to begin analysis with the LiVAE deep learning model."})]}),h?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"text-center bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:"Dataset Loaded Successfully!"}),(0,l.jsx)("p",{className:"text-green-600",children:"Your data has been processed and is ready for analysis."})]}),(0,l.jsx)(w,{dataSummary:t}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-6",children:[(0,l.jsxs)(d.$,{onClick:()=>{j()},variant:"outline",children:[(0,l.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Upload Different File"]}),(0,l.jsx)(d.$,{asChild:!0,children:(0,l.jsxs)(c(),{href:"/training/configure",children:[(0,l.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Configure Training"]})})]})]}):(0,l.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,l.jsxs)(x.Zp,{className:"mb-6",children:[(0,l.jsxs)(x.aR,{children:[(0,l.jsx)(x.ZB,{children:"Upload Requirements"}),(0,l.jsx)(x.BT,{children:"Please ensure your file meets these requirements"})]}),(0,l.jsx)(x.Wu,{children:(0,l.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("li",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"File format: AnnData (.h5ad)"]}),(0,l.jsxs)("li",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Maximum size: ",Math.round(y.p1.maxSizeBytes/1048576)," MB"]}),(0,l.jsxs)("li",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Should contain raw or processed count data"]}),(0,l.jsxs)("li",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Cell and gene annotations are optional but recommended"]})]})})]}),(0,l.jsx)(f,{onFileSelect:e=>{e.name.endsWith(".h5ad")&&(e.size>y.p1.maxSizeBytes||u(e))},isUploading:e,progress:s,error:a,isSuccess:h})]}),(0,l.jsxs)(x.Zp,{className:"mt-12 bg-blue-50 border-blue-200",children:[(0,l.jsx)(x.aR,{children:(0,l.jsx)(x.ZB,{className:"text-blue-800",children:"Need Help?"})}),(0,l.jsxs)(x.Wu,{className:"text-blue-700",children:[(0,l.jsx)("p",{className:"mb-2",children:"If you're having trouble uploading your file, make sure:"}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,l.jsx)("li",{children:"The file is in AnnData (.h5ad) format"}),(0,l.jsx)("li",{children:"The file size is under the limit"}),(0,l.jsx)("li",{children:"You have a stable internet connection"}),(0,l.jsx)("li",{children:"The backend server is running"})]}),(0,l.jsxs)("p",{className:"mt-3 text-sm",children:["For more information about AnnData format, visit the"," ",(0,l.jsx)("a",{href:"https://anndata.readthedocs.io/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"AnnData documentation"})]})]})]})]})}}},e=>{e.O(0,[593,223,612,121,255,358],()=>e(e.s=6514)),_N_E=e.O()}]);