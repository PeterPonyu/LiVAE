(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{4281:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var l=a(5155),t=a(2115),r=a(1786),n=a(5626),i=a(3327),c=a(2529),d=a(3804),x=a(2987),o=a(2619),m=a.n(o),h=a(1983),u=a(5849),j=a(7389);let g=e=>{var{variant:s="default",size:a="md",className:t="",disabled:r,children:n}=e,i=(0,j._)(e,["variant","size","className","disabled","children"]);return(0,l.jsx)("button",(0,u._)((0,h._)({className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[a]," ").concat(t),disabled:r},i),{children:n}))},p=e=>{let{variant:s="default",children:a,className:t=""}=e;return(0,l.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({default:"bg-blue-600 text-white",secondary:"bg-gray-200 text-gray-900",outline:"border border-gray-300 bg-white text-gray-700",destructive:"bg-red-600 text-white"}[s]," ").concat(t),children:a})},v=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(a),children:s})},N=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 ".concat(a),children:s})},y=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 ".concat(a),children:s})},f=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-1 ".concat(a),children:s})},b=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"px-6 py-5 ".concat(a),children:s})},_=e=>{let{variant:s="default",children:a,className:t=""}=e;return(0,l.jsx)("div",{className:"border rounded-lg p-4 ".concat({default:"bg-blue-50 border-blue-200 text-blue-800",destructive:"bg-red-50 border-red-200 text-red-800"}[s]," ").concat(t),children:a})},w=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"text-sm ".concat(a),children:s})},A=e=>{let{value:s,className:a=""}=e;return(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden ".concat(a),children:(0,l.jsx)("div",{className:"bg-blue-600 h-full transition-all duration-300 ease-in-out",style:{width:"".concat(Math.min(100,Math.max(0,s)),"%")}})})};var S=a(4054),F=a(2001),U=a(6132),M=a(8566);let q=e=>{var s;let{onFileSelect:a,isUploading:n=!1,progress:i=0,error:d=null,isSuccess:x=!1,disabled:o=!1}=e,m=(0,t.useCallback)((e,s)=>{!(s.length>0)&&e.length>0&&a(e[0])},[a]),{getRootProps:j,getInputProps:p,isDragActive:v,isDragReject:N}=(0,S.VB)({onDrop:m,accept:{"application/octet-stream":[".h5ad"]},maxSize:M.p1.maxSizeBytes,multiple:!1,disabled:o||n});return(0,l.jsxs)("div",{className:"w-full space-y-4",children:[(0,l.jsxs)("div",(0,u._)((0,h._)({},j()),{className:"\n          relative cursor-pointer border-2 border-dashed rounded-lg p-8 text-center transition-colors\n          ".concat(v&&!N?"border-blue-500 bg-blue-50":"","\n          ").concat(N?"border-red-500 bg-red-50":"","\n          ").concat(n||o?"cursor-not-allowed opacity-50":"","\n          ").concat(x?"border-green-500 bg-green-50":"border-gray-300","\n          ").concat(x||n||v?"":"hover:border-gray-400 hover:bg-gray-50","\n        "),children:[(0,l.jsx)("input",(0,h._)({},p())),(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[x?(0,l.jsx)(c.A,{className:"h-12 w-12 text-green-500"}):(0,l.jsx)(r.A,{className:"h-12 w-12 text-gray-400"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:x?"File Uploaded Successfully!":"Upload AnnData File"}),!x&&(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,l.jsx)("p",{children:v?"Drop the file here...":"Drag & drop your .h5ad file here, or click to browse"}),(0,l.jsxs)("p",{className:"mt-1",children:["Maximum file size: ",(s=M.p1.maxSizeBytes,"".concat((s/1048576).toFixed(1)," MB"))]})]})]}),!x&&!n&&(0,l.jsxs)(g,{variant:"outline",size:"sm",type:"button",children:[(0,l.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Choose File"]})]})]})),n&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{children:"Uploading..."}),(0,l.jsxs)("span",{children:[i,"%"]})]}),(0,l.jsx)(A,{value:i})]}),d&&(0,l.jsx)(_,{variant:"destructive",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(U.A,{className:"h-5 w-5 mt-0.5"}),(0,l.jsx)(w,{children:d})]})})]})};var C=a(7830);let k=e=>{var s,a,t,r,n,i,c,d,x,o,m,h,u,j,g,_,w,A,S,F;let{dataSummary:U}=e,M=e=>e.toLocaleString(),q=e=>void 0===e?"N/A":"".concat((100*e).toFixed(1),"%");return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsxs)(y,{className:"flex items-center justify-between",children:["Dataset Overview",(0,l.jsx)(p,{variant:"secondary",children:(0,C.m)(new Date(U.loaded_at),{addSuffix:!0})})]}),(0,l.jsx)(f,{children:U.filename&&"File: ".concat(U.filename)})]}),(0,l.jsx)(b,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:M(U.shape.n_obs)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Cells"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:M(U.shape.n_vars)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Genes"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(e=>e?e<1?"".concat((1024*e).toFixed(1)," KB"):"".concat(e.toFixed(1)," MB"):"Unknown")(U.file_size_mb)}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"File Size"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:Object.keys(U.layers).length+1}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"Layers"})]})]})})]}),(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsx)(y,{children:"Main Data Layer (X)"}),(0,l.jsx)(f,{children:"Primary expression matrix"})]}),(0,l.jsx)(b,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Data Type:"}),(0,l.jsx)("div",{className:"text-gray-600",children:U.X_info.dtype})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Sparsity:"}),(0,l.jsx)("div",{className:"text-gray-600",children:q(U.X_info.sparsity_ratio)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Min Value:"}),(0,l.jsx)("div",{className:"text-gray-600",children:null!=(m=null==(s=U.X_info.min_val)?void 0:s.toFixed(2))?m:"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Max Value:"}),(0,l.jsx)("div",{className:"text-gray-600",children:null!=(h=null==(a=U.X_info.max_val)?void 0:a.toFixed(2))?h:"N/A"})]})]})})]}),Object.keys(U.layers).length>0&&(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsx)(y,{children:"Additional Layers"}),(0,l.jsx)(f,{children:"Extra data matrices in the dataset"})]}),(0,l.jsx)(b,{children:(0,l.jsx)("div",{className:"space-y-3",children:Object.entries(U.layers).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"font-medium",children:s}),(0,l.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-600",children:[(0,l.jsx)("span",{children:a.dtype}),(0,l.jsxs)("span",{children:[q(a.sparsity_ratio)," sparse"]})]})]},s)})})})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsxs)(y,{children:["Cell Annotations (",U.obs_columns.length,")"]}),(0,l.jsx)(f,{children:"Metadata columns for cells"})]}),(0,l.jsxs)(b,{className:"space-y-2",children:[U.obs_columns.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("span",{className:"text-gray-600",children:[e.n_unique," unique (",e.dtype,")"]})]},e.name)),U.obs_columns.length>5&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",U.obs_columns.length-5," more"]})]})]}),(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsxs)(y,{children:["Gene Annotations (",U.var_columns.length,")"]}),(0,l.jsx)(f,{children:"Metadata columns for genes"})]}),(0,l.jsxs)(b,{className:"space-y-2",children:[U.var_columns.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:e.name}),(0,l.jsxs)("span",{className:"text-gray-600",children:[e.n_unique," unique (",e.dtype,")"]})]},e.name)),U.var_columns.length>5&&(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["... and ",U.var_columns.length-5," more"]})]})]})]}),U.qc_metrics&&(0,l.jsxs)(v,{children:[(0,l.jsxs)(N,{children:[(0,l.jsx)(y,{children:"Quality Control Metrics"}),(0,l.jsx)(f,{children:"Basic QC statistics for the dataset"})]}),(0,l.jsx)(b,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Genes per Cell"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(u=null==(t=U.qc_metrics.n_genes_by_counts.mean)?void 0:t.toFixed(0))?u:"N/A"," \xb1 "," ",null!=(j=null==(r=U.qc_metrics.n_genes_by_counts.std)?void 0:r.toFixed(0))?j:"N/A"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Total Counts"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(g=null==(n=U.qc_metrics.total_counts.mean)?void 0:n.toFixed(0))?g:"N/A"," \xb1 "," ",null!=(_=null==(i=U.qc_metrics.total_counts.std)?void 0:i.toFixed(0))?_:"N/A"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"MT Gene %"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(w=null==(c=U.qc_metrics.pct_counts_mt.mean)?void 0:c.toFixed(1))?w:"N/A","% \xb1 "," ",null!=(A=null==(d=U.qc_metrics.pct_counts_mt.std)?void 0:d.toFixed(1))?A:"N/A","%"]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"font-medium",children:"Ribosomal %"}),(0,l.jsxs)("div",{className:"text-gray-600",children:[null!=(S=null==(x=U.qc_metrics.pct_counts_ribo.mean)?void 0:x.toFixed(1))?S:"N/A","% \xb1 "," ",null!=(F=null==(o=U.qc_metrics.pct_counts_ribo.std)?void 0:o.toFixed(1))?F:"N/A","%"]})]})]})})]})]})};var D=a(1894);let z=()=>{let{isUploading:e,progress:s,error:a,dataSummary:o,isSuccess:j,uploadFile:f,reset:A}=(()=>{let[e,s]=(0,t.useState)({isUploading:!1,progress:0,error:null,dataSummary:null,isSuccess:!1}),a=(0,t.useCallback)(async e=>{s({isUploading:!0,progress:0,error:null,dataSummary:null,isSuccess:!1});try{s(e=>(0,u._)((0,h._)({},e),{progress:10}));let a=await D.FH.uploadData(e);s(e=>(0,u._)((0,h._)({},e),{progress:90})),a.success&&a.data_summary?s({isUploading:!1,progress:100,error:null,dataSummary:a.data_summary,isSuccess:!0}):s({isUploading:!1,progress:0,error:a.message||"Upload failed",dataSummary:null,isSuccess:!1})}catch(e){s({isUploading:!1,progress:0,error:e instanceof Error?e.message:"Upload failed",dataSummary:null,isSuccess:!1})}},[]),l=(0,t.useCallback)(()=>{s({isUploading:!1,progress:0,error:null,dataSummary:null,isSuccess:!1})},[]);return(0,u._)((0,h._)({},e),{uploadFile:a,reset:l})})();return(0,l.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,l.jsx)(r.A,{className:"h-8 w-8"}),"Upload Dataset"]}),(0,l.jsx)("p",{className:"text-gray-600",children:"Upload your scRNA-seq data in AnnData format to begin training"})]}),(0,l.jsx)(m(),{href:"/",children:(0,l.jsxs)(g,{variant:"outline",children:[(0,l.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Home"]})})]}),j?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(_,{className:"bg-green-50 border-green-200",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(c.A,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,l.jsxs)(w,{className:"text-green-800",children:[(0,l.jsx)("strong",{children:"Upload successful!"})," Your dataset is ready for training."]})]})}),(0,l.jsx)(k,{dataSummary:o}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center",children:[(0,l.jsxs)(g,{onClick:A,variant:"outline",children:[(0,l.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Upload Different File"]}),(0,l.jsx)(m(),{href:"/training/configure",children:(0,l.jsxs)(g,{size:"lg",children:["Configure Training",(0,l.jsx)(x.A,{className:"ml-2 h-4 w-4"})]})})]})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(v,{children:[(0,l.jsx)(N,{className:"pb-3",children:(0,l.jsx)(y,{className:"text-lg",children:"File Requirements"})}),(0,l.jsx)(b,{children:(0,l.jsxs)("div",{className:"grid sm:grid-cols-2 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p,{variant:"outline",children:"Format"}),(0,l.jsx)("span",{className:"text-gray-700",children:".h5ad (AnnData)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p,{variant:"outline",children:"Max Size"}),(0,l.jsxs)("span",{className:"text-gray-700",children:[Math.round(M.p1.maxSizeBytes/1048576)," MB"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p,{variant:"outline",children:"Data"}),(0,l.jsx)("span",{className:"text-gray-700",children:"Raw or processed counts"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p,{variant:"outline",children:"Metadata"}),(0,l.jsx)("span",{className:"text-gray-700",children:"Optional annotations"})]})]})})]}),(0,l.jsx)(q,{onFileSelect:f,isUploading:e,progress:s,error:a,isSuccess:j}),(0,l.jsx)(_,{children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(i.A,{className:"h-5 w-5 mt-0.5"}),(0,l.jsxs)(w,{className:"text-sm",children:["Need help? Check"," ",(0,l.jsx)("a",{href:"https://anndata.readthedocs.io/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium hover:text-blue-900",children:"AnnData documentation"})," ","for file format details."]})]})})]})]})};function B(){return(0,l.jsx)(z,{})}},7385:(e,s,a)=>{Promise.resolve().then(a.bind(a,4281))}},e=>{e.O(0,[593,223,886,697,255,358],()=>e(e.s=7385)),_N_E=e.O()}]);