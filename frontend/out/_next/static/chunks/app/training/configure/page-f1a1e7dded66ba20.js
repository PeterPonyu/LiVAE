(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{5668:(e,a,s)=>{Promise.resolve().then(s.bind(s,50258))},50258:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>em});var n=s(71983),t=s(45849),r=s(95155),i=s(12115),l=s(20063),c=s(22544),o=s(66942),d=s(35626),m=s(46046),u=s(85921),x=s(52619),h=s.n(x),g=s(3998),p=s(86948),j=s(93682),v=s(65024),f=s(17389),b=s(32467),_=s(77258),y=s(10489);function N(e){var{className:a}=e,s=(0,f._)(e,["className"]);return(0,r.jsx)(y.b,(0,n._)({"data-slot":"label",className:(0,_.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a)},s))}let w=c.Op,C=i.createContext({}),M=e=>{var a=(0,j._)({},(0,v._)(e));return(0,r.jsx)(C.Provider,{value:{name:a.name},children:(0,r.jsx)(c.xI,(0,n._)({},a))})},k=()=>{let e=i.useContext(C),a=i.useContext(z),{getFieldState:s}=(0,c.xW)(),t=(0,c.lN)({name:e.name}),r=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=a;return(0,n._)({id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message")},r)},z=i.createContext({});function S(e){var{className:a}=e,s=(0,f._)(e,["className"]);let t=i.useId();return(0,r.jsx)(z.Provider,{value:{id:t},children:(0,r.jsx)("div",(0,n._)({"data-slot":"form-item",className:(0,_.cn)("grid gap-2",a)},s))})}function I(e){var{className:a}=e,s=(0,f._)(e,["className"]);let{error:t,formItemId:i}=k();return(0,r.jsx)(N,(0,n._)({"data-slot":"form-label","data-error":!!t,className:(0,_.cn)("data-[error=true]:text-destructive",a),htmlFor:i},s))}function q(e){var a=(0,j._)({},(0,v._)(e));let{error:s,formItemId:t,formDescriptionId:i,formMessageId:l}=k();return(0,r.jsx)(b.DX,(0,n._)({"data-slot":"form-control",id:t,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s},a))}function F(e){var{className:a}=e,s=(0,f._)(e,["className"]);let{formDescriptionId:t}=k();return(0,r.jsx)("p",(0,n._)({"data-slot":"form-description",id:t,className:(0,_.cn)("text-muted-foreground text-sm",a)},s))}function A(e){var a,{className:s}=e,i=(0,f._)(e,["className"]);let{error:l,formMessageId:c}=k(),o=l?String(null!=(a=null==l?void 0:l.message)?a:""):i.children;return o?(0,r.jsx)("p",(0,t._)((0,n._)({"data-slot":"form-message",id:c,className:(0,_.cn)("text-destructive text-sm",s)},i),{children:o})):null}function T(e){var{className:a,type:s}=e,t=(0,f._)(e,["className","type"]);return(0,r.jsx)("input",(0,n._)({type:s,"data-slot":"input",className:(0,_.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a)},t))}var V=s(18332),E=s(10357),L=s(15686),R=s(24033),D=s(5917),P=s(12108);function B(e){var a=(0,j._)({},(0,v._)(e));return(0,r.jsx)(L.bL,(0,n._)({"data-slot":"select"},a))}function Z(e){var a=(0,j._)({},(0,v._)(e));return(0,r.jsx)(L.WT,(0,n._)({"data-slot":"select-value"},a))}function U(e){var{className:a,size:s="default",children:i}=e,l=(0,f._)(e,["className","size","children"]);return(0,r.jsxs)(L.l9,(0,t._)((0,n._)({"data-slot":"select-trigger","data-size":s,className:(0,_.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a)},l),{children:[i,(0,r.jsx)(L.In,{asChild:!0,children:(0,r.jsx)(R.A,{className:"size-4 opacity-50"})})]}))}function W(e){var{className:a,children:s,position:i="popper"}=e,l=(0,f._)(e,["className","children","position"]);return(0,r.jsx)(L.ZL,{children:(0,r.jsxs)(L.UC,(0,t._)((0,n._)({"data-slot":"select-content",className:(0,_.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i},l),{children:[(0,r.jsx)(H,{}),(0,r.jsx)(L.LM,{className:(0,_.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(Q,{})]}))})}function X(e){var{className:a,children:s}=e,i=(0,f._)(e,["className","children"]);return(0,r.jsxs)(L.q7,(0,t._)((0,n._)({"data-slot":"select-item",className:(0,_.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a)},i),{children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(L.VF,{children:(0,r.jsx)(D.A,{className:"size-4"})})}),(0,r.jsx)(L.p4,{children:s})]}))}function H(e){var{className:a}=e,s=(0,f._)(e,["className"]);return(0,r.jsx)(L.PP,(0,t._)((0,n._)({"data-slot":"select-scroll-up-button",className:(0,_.cn)("flex cursor-default items-center justify-center py-1",a)},s),{children:(0,r.jsx)(P.A,{className:"size-4"})}))}function Q(e){var{className:a}=e,s=(0,f._)(e,["className"]);return(0,r.jsx)(L.wn,(0,t._)((0,n._)({"data-slot":"select-scroll-down-button",className:(0,_.cn)("flex cursor-default items-center justify-center py-1",a)},s),{children:(0,r.jsx)(R.A,{className:"size-4"})}))}var O=s(83026);function G(e){var{className:a,defaultValue:s,value:l,min:c=0,max:o=100}=e,d=(0,f._)(e,["className","defaultValue","value","min","max"]);let m=i.useMemo(()=>Array.isArray(l)?l:Array.isArray(s)?s:[c,o],[l,s,c,o]);return(0,r.jsxs)(O.bL,(0,t._)((0,n._)({"data-slot":"slider",defaultValue:s,value:l,min:c,max:o,className:(0,_.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a)},d),{children:[(0,r.jsx)(O.CC,{"data-slot":"slider-track",className:(0,_.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,r.jsx)(O.Q6,{"data-slot":"slider-range",className:(0,_.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:m.length},(e,a)=>(0,r.jsx)(O.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]}))}var $=s(11647),K=s(57268);function Y(e){var{className:a,orientation:s="horizontal",decorative:t=!0}=e,i=(0,f._)(e,["className","orientation","decorative"]);return(0,r.jsx)(K.b,(0,n._)({"data-slot":"separator",decorative:t,orientation:s,className:(0,_.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a)},i))}let J=e=>{let{form:a,availableLayers:s}=e;return(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)(p.ZB,{children:"Model Parameters"}),(0,r.jsx)(p.BT,{children:"Configure the LiVAE model architecture and training hyperparameters"})]}),(0,r.jsxs)(p.Wu,{className:"space-y-6",children:[(0,r.jsx)(M,{control:a.control,name:"agent_parameters.layer",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Data Layer"}),(0,r.jsxs)(B,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(U,{children:(0,r.jsx)(Z,{placeholder:"Select data layer to use"})})}),(0,r.jsx)(W,{children:s.map(e=>(0,r.jsx)(X,{value:e,children:"X"===e?"X (Main Layer)":e},e))})]}),(0,r.jsx)(F,{children:"Choose which data layer to use for training"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(Y,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Architecture"}),(0,r.jsx)($.E,{variant:"outline",children:"Network Dimensions"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(M,{control:a.control,name:"agent_parameters.hidden_dim",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Hidden Dimension"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number"},a),{onChange:e=>a.onChange(parseInt(e.target.value)||0)}))}),(0,r.jsx)(F,{children:"Encoder/decoder width"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.latent_dim",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Latent Dimension"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number"},a),{onChange:e=>a.onChange(parseInt(e.target.value)||0)}))}),(0,r.jsx)(F,{children:"Latent space size"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.i_dim",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Interpretable Dimension"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number"},a),{onChange:e=>a.onChange(parseInt(e.target.value)||0)}))}),(0,r.jsx)(F,{children:"Interpretable embedding size"}),(0,r.jsx)(A,{})]})}})]})]}),(0,r.jsx)(Y,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Loss Weights"}),(0,r.jsx)($.E,{variant:"outline",children:"Regularization"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(M,{control:a.control,name:"agent_parameters.beta",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Beta (β-VAE Weight): ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:.1,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"KL divergence weight"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.irecon",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Interpretable Reconstruction: ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:0,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Interpretable embedding reconstruction weight"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.lorentz",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Lorentz Distance: ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:0,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Hyperbolic geometry regularization"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.dip",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["DIP-VAE: ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:0,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Disentangled inferred prior weight"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.tc",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Total Correlation: ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:0,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"β-TC-VAE total correlation penalty"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.info",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Mutual Information: ",a.value]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:0,max:10,step:.1,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Mutual information penalty weight"}),(0,r.jsx)(A,{})]})}})]})]}),(0,r.jsx)(Y,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Training"}),(0,r.jsx)($.E,{variant:"outline",children:"Optimization"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(M,{control:a.control,name:"agent_parameters.lr",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Learning Rate: ",a.value.toExponential(1)]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:1e-6,max:.1,step:1e-6,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Adam optimizer learning rate"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"agent_parameters.percent",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"space-y-3",children:[(0,r.jsxs)(I,{children:["Data Percentage: ",(100*a.value).toFixed(1),"%"]}),(0,r.jsx)(q,{children:(0,r.jsx)(G,{min:.001,max:1,step:.001,value:[a.value],onValueChange:e=>a.onChange(e[0])})}),(0,r.jsx)(F,{children:"Fraction of data to use for training"}),(0,r.jsx)(A,{})]})}})]})]})]})]})};var ee=s(27599);function ea(e){var{className:a}=e,s=(0,f._)(e,["className"]);return(0,r.jsx)(ee.bL,(0,t._)((0,n._)({"data-slot":"switch",className:(0,_.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a)},s),{children:(0,r.jsx)(ee.zi,{"data-slot":"switch-thumb",className:(0,_.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})}))}var es=s(23327);let en=e=>{let{form:a}=e,s=a.watch("training_config.apply_qc");return(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)(p.ZB,{children:"Quality Control Filters"}),(0,r.jsx)(p.BT,{children:"Apply preprocessing filters to remove low-quality cells and genes"})]}),(0,r.jsxs)(p.Wu,{className:"space-y-6",children:[(0,r.jsx)(M,{control:a.control,name:"training_config.apply_qc",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(I,{className:"text-base",children:"Apply Quality Control"}),(0,r.jsx)(F,{children:"Enable preprocessing filters to improve data quality"})]}),(0,r.jsx)(q,{children:(0,r.jsx)(ea,{checked:a.value,onCheckedChange:a.onChange})})]})}}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V.Fc,{children:[(0,r.jsx)(es.A,{className:"h-4 w-4"}),(0,r.jsx)(V.TN,{children:"QC filtering will be applied before training. Cells and genes not meeting the criteria below will be removed from the dataset."})]}),(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.species",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Species"}),(0,r.jsxs)(B,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,r.jsx)(q,{children:(0,r.jsx)(U,{children:(0,r.jsx)(Z,{placeholder:"Select species"})})}),(0,r.jsxs)(W,{children:[(0,r.jsx)(X,{value:"human",children:"Human"}),(0,r.jsx)(X,{value:"mouse",children:"Mouse"})]})]}),(0,r.jsx)(F,{children:"Species type for mitochondrial gene detection"}),(0,r.jsx)(A,{})]})}}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Cell Quality Filters"}),(0,r.jsx)($.E,{variant:"outline",children:"Per Cell"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.min_genes_per_cell",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Minimum Genes per Cell"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 200"},a),{onChange:e=>a.onChange(e.target.value?parseInt(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with fewer detected genes"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.max_genes_per_cell",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Maximum Genes per Cell"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 5000"},a),{onChange:e=>a.onChange(e.target.value?parseInt(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with too many detected genes (doublets)"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.min_counts_per_cell",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Minimum UMI per Cell"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 500"},a),{onChange:e=>a.onChange(e.target.value?parseInt(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with low total UMI counts"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.max_counts_per_cell",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Maximum UMI per Cell"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 30000"},a),{onChange:e=>a.onChange(e.target.value?parseInt(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with extremely high UMI counts"}),(0,r.jsx)(A,{})]})}})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Gene Type Filters"}),(0,r.jsx)($.E,{variant:"outline",children:"Percentage Cutoffs"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.max_pct_mt",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Max Mitochondrial %"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 20",step:"0.1"},a),{onChange:e=>a.onChange(e.target.value?parseFloat(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with high mitochondrial gene expression"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(M,{control:a.control,name:"training_config.qc_params.max_pct_ribo",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Max Ribosomal %"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number",placeholder:"e.g., 50",step:"0.1"},a),{onChange:e=>a.onChange(e.target.value?parseFloat(e.target.value):void 0)}))}),(0,r.jsx)(F,{children:"Remove cells with excessive ribosomal gene expression"}),(0,r.jsx)(A,{})]})}})]})]})]})]})]})};var et=s(61894),er=s(41508);let ei=er.Ikc({species:er.k5n(["human","mouse"]),min_genes_per_cell:er.aig().min(1,"Must be at least 1").max(1e4,"Must be less than 10,000").optional(),max_genes_per_cell:er.aig().min(100,"Must be at least 100").max(5e4,"Must be less than 50,000").optional(),min_counts_per_cell:er.aig().min(1,"Must be at least 1").max(1e5,"Must be less than 100,000").optional(),max_counts_per_cell:er.aig().min(1e3,"Must be at least 1,000").max(1e6,"Must be less than 1,000,000").optional(),max_pct_mt:er.aig().min(0,"Must be at least 0%").max(100,"Must be less than 100%").optional(),max_pct_ribo:er.aig().min(0,"Must be at least 0%").max(100,"Must be less than 100%").optional()}),el=er.Ikc({layer:er.YjP().min(1,"Layer is required"),percent:er.aig().min(.001,"Must be at least 0.1%").max(1,"Must be at most 100%"),irecon:er.aig().min(0,"Must be non-negative").max(10,"Must be less than 10"),lorentz:er.aig().min(0,"Must be non-negative").max(10,"Must be less than 10"),beta:er.aig().min(.1,"Must be at least 0.1").max(10,"Must be less than 10"),dip:er.aig().min(0,"Must be non-negative").max(10,"Must be less than 10"),tc:er.aig().min(0,"Must be non-negative").max(10,"Must be less than 10"),info:er.aig().min(0,"Must be non-negative").max(10,"Must be less than 10"),hidden_dim:er.aig().min(16,"Must be at least 16").max(1024,"Must be less than 1024"),latent_dim:er.aig().min(2,"Must be at least 2").max(100,"Must be less than 100"),i_dim:er.aig().min(2,"Must be at least 2").max(50,"Must be less than 50"),lr:er.aig().min(1e-6,"Must be at least 1e-6").max(.1,"Must be less than 0.1")}),ec=er.Ikc({epochs:er.aig().min(1,"Must be at least 1 epoch").max(1e4,"Must be less than 10,000 epochs"),apply_qc:er.zMY(),qc_params:ei.optional()}),eo=er.Ikc({training_config:ec,agent_parameters:el});var ed=s(88566);function em(){let e=(0,l.useRouter)(),[a,s]=(0,i.useState)(null),[x,j]=(0,i.useState)(!0),{isSubmitting:v,error:f,isSuccess:b,submitTrainingConfig:_,reset:y}=(()=>{let[e,a]=(0,i.useState)({isSubmitting:!1,error:null,isSuccess:!1}),s=(0,i.useCallback)(async e=>{a({isSubmitting:!0,error:null,isSuccess:!1});try{let s=e.agent_parameters,n={epochs:e.training_config.epochs,qcparams:e.training_config.apply_qc?e.training_config.qc_params:void 0},t=await et.FH.startTraining(s,n);t.success?a({isSubmitting:!1,error:null,isSuccess:!0}):a({isSubmitting:!1,error:t.message||"Failed to start training",isSuccess:!1})}catch(e){a({isSubmitting:!1,error:e instanceof Error?e.message:"Failed to start training",isSuccess:!1})}},[]),r=(0,i.useCallback)(()=>{a({isSubmitting:!1,error:null,isSuccess:!1})},[]);return(0,t._)((0,n._)({},e),{submitTrainingConfig:s,reset:r})})(),N=(0,c.mN)({resolver:(0,o.u)(eo),defaultValues:{training_config:{epochs:1e3,apply_qc:!1,qc_params:ed.uf},agent_parameters:ed.BK}});if((0,i.useEffect)(()=>{(async()=>{try{let e=await et.FH.getDataSummary();s(e)}catch(e){console.error("No data loaded:",e)}finally{j(!1)}})()},[]),(0,i.useEffect)(()=>{b&&setTimeout(()=>{e.push("/training/monitor")},2e3)},[b,e]),x)return(0,r.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{children:"Loading configuration..."})})});if(!a)return(0,r.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,r.jsx)(V.Fc,{variant:"destructive",children:(0,r.jsx)(V.TN,{children:"No dataset found. Please upload your data first."})}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(g.$,{asChild:!0,children:(0,r.jsxs)(h(),{href:"/upload",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Upload Data"]})})})]});let C=["X",...Object.keys(a.layers)];return(0,r.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Training Configuration"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure model parameters and quality control filters"})]}),(0,r.jsx)(g.$,{variant:"outline",asChild:!0,children:(0,r.jsxs)(h(),{href:"/",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]}),(0,r.jsxs)(p.Zp,{className:"mb-6",children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)(p.ZB,{children:"Dataset Summary"}),(0,r.jsx)(p.BT,{children:"Currently loaded dataset"})]}),(0,r.jsx)(p.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Cells"}),(0,r.jsx)("div",{className:"text-gray-600",children:a.shape.n_obs.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Genes"}),(0,r.jsx)("div",{className:"text-gray-600",children:a.shape.n_vars.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Layers"}),(0,r.jsx)("div",{className:"text-gray-600",children:C.join(", ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"File"}),(0,r.jsx)("div",{className:"text-gray-600",children:a.filename||"Unknown"})]})]})})]}),(0,r.jsx)(w,(0,t._)((0,n._)({},N),{children:(0,r.jsxs)("form",{onSubmit:N.handleSubmit(e=>{_(e)}),className:"space-y-6",children:[(0,r.jsxs)(E.tU,{defaultValue:"parameters",className:"space-y-6",children:[(0,r.jsxs)(E.j7,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(E.Xi,{value:"parameters",children:"Model Parameters"}),(0,r.jsx)(E.Xi,{value:"qc",children:"Quality Control"}),(0,r.jsx)(E.Xi,{value:"training",children:"Training Settings"})]}),(0,r.jsx)(E.av,{value:"parameters",children:(0,r.jsx)(J,{form:N,availableLayers:C})}),(0,r.jsx)(E.av,{value:"qc",children:(0,r.jsx)(en,{form:N})}),(0,r.jsx)(E.av,{value:"training",children:(0,r.jsxs)(p.Zp,{children:[(0,r.jsxs)(p.aR,{children:[(0,r.jsx)(p.ZB,{children:"Training Settings"}),(0,r.jsx)(p.BT,{children:"Configure the training process"})]}),(0,r.jsxs)(p.Wu,{className:"space-y-4",children:[(0,r.jsx)(M,{control:N.control,name:"training_config.epochs",render:e=>{let{field:a}=e;return(0,r.jsxs)(S,{children:[(0,r.jsx)(I,{children:"Number of Epochs"}),(0,r.jsx)(q,{children:(0,r.jsx)(T,(0,t._)((0,n._)({type:"number"},a),{onChange:e=>a.onChange(parseInt(e.target.value)||0)}))}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Number of training iterations (recommended: 1000-5000)"}),(0,r.jsx)(A,{})]})}}),(0,r.jsx)(V.Fc,{children:(0,r.jsx)(V.TN,{children:"Training time depends on dataset size and number of epochs. A typical dataset with ~10,000 cells takes 5-15 minutes per 1000 epochs."})})]})]})})]}),f&&(0,r.jsx)(V.Fc,{variant:"destructive",children:(0,r.jsx)(V.TN,{children:f})}),b&&(0,r.jsx)(V.Fc,{className:"bg-green-50 border-green-200",children:(0,r.jsx)(V.TN,{className:"text-green-800",children:"Training started successfully! Redirecting to monitoring page..."})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[(0,r.jsxs)(g.$,{type:"button",variant:"outline",onClick:()=>{N.reset({training_config:{epochs:1e3,apply_qc:!1,qc_params:ed.uf},agent_parameters:ed.BK}),y()},children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]}),(0,r.jsxs)(g.$,{type:"submit",disabled:v,children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"}),v?"Starting Training...":"Start Training"]})]})]})}))]})}}},e=>{e.O(0,[223,549,121,255,358],()=>e(e.s=5668)),_N_E=e.O()}]);