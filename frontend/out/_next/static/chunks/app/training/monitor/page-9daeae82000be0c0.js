(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{20474:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var a=t(95155),i=t(12115),r=t(89559),l=t(35626),n=t(71847);let c=(0,n.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),d=(0,n.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var o=t(52619),x=t.n(o),h=t(86948),m=t(3998),u=t(6143),j=t(11647),p=t(18332),g=t(10357),v=t(61894);let N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,[s,t]=(0,i.useState)(null),[a,r]=(0,i.useState)(!0),[l,n]=(0,i.useState)(null),c=(0,i.useRef)(null),d=(0,i.useCallback)(async()=>{try{let e=await v.FH.getTrainingProgress();t(e),n(null)}catch(e){n(e instanceof Error?e.message:"Failed to fetch training progress"),console.error("Training progress fetch error:",e)}finally{r(!1)}},[]),o=(0,i.useCallback)(()=>{c.current&&clearInterval(c.current),d(),c.current=setInterval(()=>{d()},e)},[d,e]),x=(0,i.useCallback)(()=>{c.current&&(clearInterval(c.current),c.current=null)},[]);return(0,i.useEffect)(()=>(o(),()=>x()),[o,x]),(0,i.useEffect)(()=>{s&&!s.is_running&&setTimeout(()=>{s&&!s.is_running&&x()},1e4)},[s,x]),{trainingState:s,isLoading:a,error:l,stopTraining:(0,i.useCallback)(async()=>{try{await v.FH.stopTraining(),setTimeout(d,1e3)}catch(e){n(e instanceof Error?e.message:"Failed to stop training")}},[d]),refresh:d,startPolling:o,stopPolling:x}};var f=t(26991),y=t(25216),b=t(68425),w=t(47734),C=t(73697),k=t(77033),F=t(36119);let _=e=>{let{data:s,dataKey:t,title:i,description:r,color:l,formatValue:n,domain:c,height:d=250}=e,o=(()=>{if(s.length<2)return null;let e=s.slice(-3);if(e.length<2)return null;let a=e[0][t],i=e[e.length-1][t];if("number"!=typeof a||"number"!=typeof i)return null;let r=i-a;return{change:Math.abs(r),isImproving:"loss"===t||"db"===t?r<0:r>0,direction:r>0?"up":"down"}})();return(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{className:"pb-3",children:[(0,a.jsxs)(h.ZB,{className:"text-lg flex items-center justify-between",children:[i,o&&(0,a.jsxs)(j.E,{variant:o.isImproving?"default":"secondary",className:"text-xs",children:[o.isImproving?"\uD83D\uDCC8":"\uD83D\uDCC9","up"===o.direction?"↗":"↘"]})]}),(0,a.jsxs)(h.BT,{className:"text-sm",children:[r,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs text-blue-600",children:"\uD83D\uDCCA 10-epoch rolling average"})]})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsx)("div",{style:{height:d},children:(0,a.jsx)(f.u,{width:"100%",height:"100%",children:(0,a.jsxs)(y.b,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(b.d,{strokeDasharray:"3 3",opacity:.3}),(0,a.jsx)(w.W,{dataKey:"epoch",tick:{fontSize:12},tickLine:{stroke:"#e0e0e0"}}),(0,a.jsx)(C.h,{tick:{fontSize:12},tickLine:{stroke:"#e0e0e0"},domain:c,tickFormatter:n}),(0,a.jsx)(k.m,{content:e=>{let{active:s,payload:t,label:i}=e;if(s&&t&&t.length){let e=t[0].value,s="number"==typeof e?e:0;return(0,a.jsxs)("div",{className:"bg-white p-3 border rounded shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium",children:"Epoch: ".concat(i)}),(0,a.jsx)("p",{className:"text-blue-600",children:"".concat(t[0].name,": ").concat(n?n(s):s.toFixed(4))}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"10-epoch average"})]})}return null}}),(0,a.jsx)(F.N,{type:"monotone",dataKey:t,stroke:l,strokeWidth:3,dot:!1,activeDot:{r:5,stroke:l,strokeWidth:2}})]})})})})]})};function T(){let{trainingState:e,isLoading:s,error:t,stopTraining:n,refresh:o}=N(),v=(0,i.useMemo)(()=>e?Math.round(e.current_epoch/e.total_epochs*100):0,[e]),f=(0,i.useMemo)(()=>(null==e?void 0:e.history)?e.history.map(e=>({epoch:e.epoch,loss:e.loss,ari:e.ari,nmi:e.nmi,asw:e.asw,ch:e.ch,db:e.db,pc:e.pc})):[],[null==e?void 0:e.history]);return s&&!e?(0,a.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading training status..."})]})}):t&&!e?(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,a.jsx)(p.Fc,{variant:"destructive",children:(0,a.jsx)(p.TN,{children:t})}),(0,a.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,a.jsxs)(m.$,{onClick:o,children:[(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Retry"]}),(0,a.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,a.jsx)(x(),{href:"/",children:"Back to Home"})})]})]}):e?(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Training Monitor"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Real-time training progress and metrics"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(m.$,{variant:"outline",onClick:o,size:"sm",children:[(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,a.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,a.jsxs)(x(),{href:"/",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Home"]})})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(h.Zp,{children:[(0,a.jsx)(h.aR,{children:(0,a.jsxs)(h.ZB,{className:"flex items-center justify-between",children:["Training Progress",(0,a.jsx)(j.E,{variant:e.is_running?"destructive":"secondary",children:e.is_running?"\uD83C\uDFC3‍♂️ Running":"⏸️ Stopped"})]})}),(0,a.jsx)(h.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsxs)("span",{children:["Epoch ",e.current_epoch," / ",e.total_epochs]}),(0,a.jsxs)("span",{children:[v,"%"]})]}),(0,a.jsx)(u.k,{value:v})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Duration: ",(e=>{if(!e)return"Unknown";let s=new Date(e),t=new Date().getTime()-s.getTime(),a=Math.floor(t/6e4),i=Math.floor(t%6e4/1e3);return a>0?"".concat(a,"m ").concat(i,"s"):"".concat(i,"s")})(e.started_at)]})]})})]}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsx)(h.ZB,{children:"Latest Metrics"}),(0,a.jsxs)(h.BT,{children:["10-epoch rolling averages",(null==e?void 0:e.latest_metrics)&&(0,a.jsxs)("span",{className:"text-blue-600 ml-1",children:["(Epoch ",e.latest_metrics.epoch,")"]})]})]}),(0,a.jsx)(h.Wu,{children:(null==e?void 0:e.latest_metrics)?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Loss:"}),(0,a.jsx)("div",{className:"text-lg font-bold text-red-600",children:e.latest_metrics.loss.toFixed(4)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"ARI:"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:e.latest_metrics.ari.toFixed(3)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"NMI:"}),(0,a.jsx)("div",{className:"text-blue-600",children:e.latest_metrics.nmi.toFixed(3)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"ASW:"}),(0,a.jsx)("div",{className:"text-purple-600",children:e.latest_metrics.asw.toFixed(3)})]})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 bg-blue-50 p-2 rounded",children:"\uD83D\uDCCA Smoothed values reduce noise and show clearer trends"})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"No metrics available yet"})})]}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsx)(h.aR,{children:(0,a.jsx)(h.ZB,{children:"Training Controls"})}),(0,a.jsxs)(h.Wu,{className:"space-y-3",children:[e.is_running&&(0,a.jsxs)(m.$,{variant:"destructive",onClick:n,className:"w-full",children:[(0,a.jsx)(c,{className:"mr-2 h-4 w-4"}),"Stop Training"]}),!e.is_running&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.$,{asChild:!0,className:"w-full",children:(0,a.jsxs)(x(),{href:"/results",children:[(0,a.jsx)(d,{className:"mr-2 h-4 w-4"}),"View Results"]})}),(0,a.jsx)(m.$,{variant:"outline",asChild:!0,className:"w-full",children:(0,a.jsx)(x(),{href:"/training/configure",children:"Configure New Training"})})]}),e.error_message&&(0,a.jsx)(p.Fc,{variant:"destructive",children:(0,a.jsx)(p.TN,{children:e.error_message})})]})]})]}),f.length>0&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Training Metrics"}),(0,a.jsxs)(j.E,{variant:"outline",children:[f.length," data points"]})]}),(0,a.jsxs)(g.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(g.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(g.Xi,{value:"overview",children:"Overview"}),(0,a.jsx)(g.Xi,{value:"clustering",children:"Clustering"}),(0,a.jsx)(g.Xi,{value:"quality",children:"Quality"}),(0,a.jsx)(g.Xi,{value:"connectivity",children:"Connectivity"})]}),(0,a.jsx)(g.av,{value:"overview",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(_,{data:f,dataKey:"loss",title:"Training Loss",description:"Reconstruction + KL divergence loss (lower is better)",color:"#dc2626",formatValue:e=>e.toFixed(4),domain:["auto","auto"],height:300}),(0,a.jsx)(_,{data:f,dataKey:"ari",title:"Adjusted Rand Index (ARI)",description:"Clustering accuracy metric (0-1, higher is better)",color:"#16a34a",formatValue:e=>e.toFixed(3),domain:["auto","auto"],height:300})]})}),(0,a.jsx)(g.av,{value:"clustering",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)(_,{data:f,dataKey:"ari",title:"Adjusted Rand Index (ARI)",description:"Measures clustering accuracy against ground truth",color:"#16a34a",formatValue:e=>e.toFixed(3),domain:["auto","auto"]}),(0,a.jsx)(_,{data:f,dataKey:"nmi",title:"Normalized Mutual Information (NMI)",description:"Information theoretic clustering measure",color:"#2563eb",formatValue:e=>e.toFixed(3),domain:["auto","auto"]})]})}),(0,a.jsx)(g.av,{value:"quality",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(_,{data:f,dataKey:"asw",title:"Average Silhouette Width (ASW)",description:"Cluster separation quality (-1 to 1, higher is better)",color:"#7c3aed",formatValue:e=>e.toFixed(3),domain:["auto","auto"]}),(0,a.jsx)(_,{data:f,dataKey:"ch",title:"Calinski-Harabasz Index (CH)",description:"Ratio of between/within cluster dispersion (higher is better)",color:"#ea580c",formatValue:e=>e.toFixed(2),domain:["auto","auto"]}),(0,a.jsx)(_,{data:f,dataKey:"db",title:"Davies-Bouldin Index (DB)",description:"Average cluster separation (lower is better)",color:"#dc2626",formatValue:e=>e.toFixed(3),domain:["auto","auto"]})]})}),(0,a.jsx)(g.av,{value:"connectivity",children:(0,a.jsx)("div",{className:"grid md:grid-cols-1 gap-6",children:(0,a.jsx)(_,{data:f,dataKey:"pc",title:"Graph Connectivity Score (PC)",description:"Preservation of local neighborhood structure (0-1, higher is better)",color:"#059669",formatValue:e=>e.toFixed(3),domain:["auto","auto"],height:350})})})]})]}),e.history.length>0&&(0,a.jsxs)(h.Zp,{className:"mt-8",children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsx)(h.ZB,{children:"Training History"}),(0,a.jsx)(h.BT,{children:"Recent training metrics (last 10 epochs)"})]}),(0,a.jsx)(h.Wu,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left p-2",children:"Epoch"}),(0,a.jsx)("th",{className:"text-left p-2",children:"Loss"}),(0,a.jsx)("th",{className:"text-left p-2",children:"ARI"}),(0,a.jsx)("th",{className:"text-left p-2",children:"NMI"}),(0,a.jsx)("th",{className:"text-left p-2",children:"ASW"}),(0,a.jsx)("th",{className:"text-left p-2",children:"CH"}),(0,a.jsx)("th",{className:"text-left p-2",children:"DB"}),(0,a.jsx)("th",{className:"text-left p-2",children:"PC"})]})}),(0,a.jsx)("tbody",{children:e.history.slice(-10).reverse().map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:e.epoch}),(0,a.jsx)("td",{className:"p-2 text-red-600",children:e.loss.toFixed(4)}),(0,a.jsx)("td",{className:"p-2 text-green-600",children:e.ari.toFixed(3)}),(0,a.jsx)("td",{className:"p-2 text-blue-600",children:e.nmi.toFixed(3)}),(0,a.jsx)("td",{className:"p-2 text-purple-600",children:e.asw.toFixed(3)}),(0,a.jsx)("td",{className:"p-2 text-orange-600",children:e.ch.toFixed(2)}),(0,a.jsx)("td",{className:"p-2 text-red-500",children:e.db.toFixed(3)}),(0,a.jsx)("td",{className:"p-2 text-green-500",children:e.pc.toFixed(3)})]},e.epoch))})]})})})]})]}):(0,a.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,a.jsx)(p.Fc,{children:(0,a.jsx)(p.TN,{children:"No training session found. Please configure and start training first."})}),(0,a.jsxs)("div",{className:"mt-4 space-x-4",children:[(0,a.jsx)(m.$,{asChild:!0,children:(0,a.jsx)(x(),{href:"/training/configure",children:"Configure Training"})}),(0,a.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,a.jsxs)(x(),{href:"/",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})]})}},25386:(e,s,t)=>{Promise.resolve().then(t.bind(t,20474))}},e=>{e.O(0,[223,121,255,358],()=>e(e.s=25386)),_N_E=e.O()}]);