(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{68126:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>R});var t=a(95155),r=a(12115),l=a(52056),n=a(89559),i=a(35626),d=a(80534),c=a(42529),o=a(52619),x=a.n(o),m=a(3998),h=a(86948),j=a(18332),g=a(11647),u=a(10357),p=a(6143);let N=e=>{let{trainingState:s,dataSummary:a}=e,r=s.error_message?"error":s.is_running?"running":s.completed_at?"completed":"incomplete",l=Math.round(s.current_epoch/s.total_epochs*100);return(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsxs)(h.ZB,{className:"flex items-center justify-between",children:["Training Summary",(0,t.jsx)(g.E,{variant:"completed"===r?"default":"running"===r||"error"===r?"destructive":"secondary",children:"completed"===r?"✅ Completed":"running"===r?"\uD83C\uDFC3‍♂️ Running":"error"===r?"❌ Error":"⏸️ Incomplete"})]}),(0,t.jsx)(h.BT,{children:"Training session details and final metrics"})]}),(0,t.jsxs)(h.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[s.current_epoch," / ",s.total_epochs," epochs (",l,"%)"]})]}),(0,t.jsx)(p.k,{value:l})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-blue-600",children:a.shape.n_obs.toLocaleString()}),(0,t.jsx)("div",{className:"text-gray-600",children:"Cells"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-green-600",children:a.shape.n_vars.toLocaleString()}),(0,t.jsx)("div",{className:"text-gray-600",children:"Genes"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-purple-600",children:((e,s)=>{if(!e)return"Unknown";let a=new Date(e),t=(s?new Date(s):new Date).getTime()-a.getTime(),r=Math.floor(t/6e4),l=Math.floor(t%6e4/1e3);if(r>60){let e=Math.floor(r/60);return"".concat(e,"h ").concat(r%60,"m")}return r>0?"".concat(r,"m ").concat(l,"s"):"".concat(l,"s")})(s.started_at,s.completed_at)}),(0,t.jsx)("div",{className:"text-gray-600",children:"Duration"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-orange-600",children:s.history.length}),(0,t.jsx)("div",{className:"text-gray-600",children:"Data Points"})]})]}),s.latest_metrics&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Final Performance Metrics"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"font-medium",children:"Loss"}),(0,t.jsx)("div",{className:"text-lg text-red-600",children:s.latest_metrics.loss.toFixed(4)})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"font-medium",children:"ARI"}),(0,t.jsx)("div",{className:"text-lg text-green-600",children:s.latest_metrics.ari.toFixed(3)})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"font-medium",children:"NMI"}),(0,t.jsx)("div",{className:"text-lg text-blue-600",children:s.latest_metrics.nmi.toFixed(3)})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"font-medium",children:"ASW"}),(0,t.jsx)("div",{className:"text-lg text-purple-600",children:s.latest_metrics.asw.toFixed(3)})]})]})]}),s.error_message&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[(0,t.jsx)("div",{className:"font-medium text-red-800",children:"Training Error:"}),(0,t.jsx)("div",{className:"text-red-600 text-sm",children:s.error_message})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,t.jsxs)("div",{children:["Started: ",s.started_at?new Date(s.started_at).toLocaleString():"Unknown"]}),s.completed_at&&(0,t.jsxs)("div",{children:["Completed: ",new Date(s.completed_at).toLocaleString()]})]})]})]})};var b=a(6132),v=a(39867),w=a(79397),y=a(26617),f=a(89715);let _=e=>{let{availableEmbeddings:s,isGeneratingEmbeddings:a,downloadProgress:r,downloadStatus:l,onDownload:i,onDownloadAll:d,onGenerate:o,trainingCompleted:x}=e,u=s.find(e=>"interpretable"===e.embedding_type),N=s.find(e=>"latent"===e.embedding_type),_=e=>{switch(e){case"complete":return(0,t.jsx)(g.E,{variant:"default",className:"bg-green-600",children:"✅ Downloaded"});case"error":return(0,t.jsx)(g.E,{variant:"destructive",children:"❌ Error"});case"downloading":return(0,t.jsx)(g.E,{variant:"secondary",children:"⏳ Downloading..."});default:return null}},S=Object.values(l).some(e=>"downloading"===e);return x?(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsxs)(h.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Download Results"})]}),(0,t.jsx)(h.BT,{children:"Download trained embeddings and model outputs"})]}),(0,t.jsxs)(h.Wu,{className:"space-y-6",children:[0===s.length&&(0,t.jsx)("div",{className:"text-center py-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)(w.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Embeddings need to be generated first"})]}),(0,t.jsxs)(m.$,{onClick:o,disabled:a||S,children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(a?"animate-spin":"")}),a?"Generating...":"Generate Embeddings"]})]})}),s.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Available Downloads"}),(0,t.jsxs)(m.$,{variant:"outline",size:"sm",onClick:d,disabled:S,className:"flex items-center space-x-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Download All (ZIP)"}),l.all&&(e=>{switch(e){case"complete":return(0,t.jsx)(c.A,{className:"h-4 w-4 text-green-600"});case"error":return(0,t.jsx)(b.A,{className:"h-4 w-4 text-red-600"});case"downloading":return(0,t.jsx)(n.A,{className:"h-4 w-4 animate-spin text-blue-600"});default:return null}})(l.all)]})]}),"downloading"===l.all&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.k,{value:r.all||0}),(0,t.jsxs)("p",{className:"text-xs text-center text-gray-600",children:["Preparing ZIP file... ",Math.round(r.all||0),"%"]})]}),u&&(0,t.jsx)(h.Zp,{className:"border-green-200 bg-green-50",children:(0,t.jsx)(h.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(f.A,{className:"h-5 w-5 text-green-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h5",{className:"font-medium",children:"Interpretable Embedding"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"2D embedding for visualization and interpretation"}),u.extracted_at&&(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["Generated: ",new Date(u.extracted_at).toLocaleString()]}),u.shape&&(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Shape: ",u.shape.n_obs," cells \xd7 ",u.shape.n_vars||2," dimensions"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,t.jsx)(g.E,{variant:"outline",children:"CSV Format"}),"downloading"===l.interpretable?(0,t.jsxs)("div",{className:"w-32 space-y-1",children:[(0,t.jsx)(p.k,{value:r.interpretable||0}),(0,t.jsxs)("p",{className:"text-xs text-center",children:[Math.round(r.interpretable||0),"%"]})]}):(0,t.jsxs)(t.Fragment,{children:[_(l.interpretable||"idle"),"complete"!==l.interpretable&&(0,t.jsxs)(m.$,{size:"sm",onClick:()=>i("interpretable"),disabled:S,className:"flex items-center space-x-1",children:[(0,t.jsx)(v.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Download"})]})]})]})]})})}),N&&(0,t.jsx)(h.Zp,{className:"border-blue-200 bg-blue-50",children:(0,t.jsx)(h.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(w.A,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h5",{className:"font-medium",children:"Latent Embedding"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"High-dimensional latent space representation"}),N.extracted_at&&(0,t.jsxs)("p",{className:"text-xs text-blue-600",children:["Generated: ",new Date(N.extracted_at).toLocaleString()]}),N.shape&&(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Shape: ",N.shape.n_obs," cells \xd7 ",N.shape.n_vars," dimensions"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,t.jsx)(g.E,{variant:"outline",children:"CSV Format"}),"downloading"===l.latent?(0,t.jsxs)("div",{className:"w-32 space-y-1",children:[(0,t.jsx)(p.k,{value:r.latent||0}),(0,t.jsxs)("p",{className:"text-xs text-center",children:[Math.round(r.latent||0),"%"]})]}):(0,t.jsxs)(t.Fragment,{children:[_(l.latent||"idle"),"complete"!==l.latent&&(0,t.jsxs)(m.$,{size:"sm",onClick:()=>i("latent"),disabled:S,className:"flex items-center space-x-1",children:[(0,t.jsx)(v.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:"Download"})]})]})]})]})})}),(0,t.jsxs)("div",{className:"text-center pt-4 border-t",children:[(0,t.jsxs)(m.$,{variant:"outline",onClick:o,disabled:a||S,size:"sm",children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(a?"animate-spin":"")}),a?"Regenerating...":"Regenerate Embeddings"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will overwrite existing embeddings"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,t.jsx)("h5",{className:"font-medium mb-2",children:"\uD83D\uDCCB File Format Information"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"CSV files"})," with cell identifiers as row names"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Interpretable embedding:"})," 2 columns (UMAP coordinates)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Latent embedding:"})," N columns (latent dimensions)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"ZIP package:"})," All results + training history"]}),(0,t.jsxs)("li",{children:["• Compatible with ",(0,t.jsx)("strong",{children:"Python, R, and Excel"})]})]})]})]})]}):(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsx)(h.ZB,{children:"Download Results"}),(0,t.jsx)(h.BT,{children:"Training must be completed first"})]}),(0,t.jsx)(h.Wu,{children:(0,t.jsx)(j.Fc,{children:(0,t.jsx)(j.TN,{children:"Complete the training process to download embeddings and results."})})})]})};var S=a(71983),A=a(45849),E=a(61894),F=a(26991),C=a(25216),P=a(68425),k=a(47734),D=a(73697),T=a(77033),I=a(50813),W=a(36119);function R(){let{isLoading:e,error:s,trainingCompleted:a,trainingState:o,dataSummary:p,availableEmbeddings:b,isGeneratingEmbeddings:v,downloadProgress:w,downloadStatus:y,downloadEmbedding:f,downloadAllResults:R,generateEmbeddings:M,refresh:Z,clearError:L}=(()=>{let[e,s]=(0,r.useState)({isLoading:!0,error:null,trainingCompleted:!1,trainingState:null,dataSummary:null,availableEmbeddings:[],isGeneratingEmbeddings:!1,downloadProgress:{},downloadStatus:{}}),a=(0,r.useCallback)(async()=>{try{s(e=>(0,A._)((0,S._)({},e),{isLoading:!0,error:null}));let[e,a]=await Promise.all([E.FH.getTrainingProgress(),E.FH.getDataSummary()]),t=await E.mo.isTrainingComplete(),r=[];t&&(r=await E.mo.getAllEmbeddings()),s(s=>(0,A._)((0,S._)({},s),{isLoading:!1,trainingCompleted:t,trainingState:e,dataSummary:a,availableEmbeddings:r}))}catch(e){s(s=>(0,A._)((0,S._)({},s),{isLoading:!1,error:e instanceof Error?e.message:"Failed to fetch results"}))}},[]),t=(0,r.useCallback)(async e=>{try{s(s=>(0,A._)((0,S._)({},s),{downloadStatus:(0,A._)((0,S._)({},s.downloadStatus),{[e]:"downloading"}),downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{[e]:0})}));let a=await E.FH.downloadEmbedding(e,a=>{s(s=>(0,A._)((0,S._)({},s),{downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{[e]:a})}))});await E.mo.downloadFile(a,"".concat(e,"_embedding.csv"),()=>{s(s=>(0,A._)((0,S._)({},s),{downloadStatus:(0,A._)((0,S._)({},s.downloadStatus),{[e]:"complete"}),downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{[e]:100})})),setTimeout(()=>{s(s=>(0,A._)((0,S._)({},s),{downloadStatus:(0,A._)((0,S._)({},s.downloadStatus),{[e]:"idle"}),downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{[e]:0})}))},3e3)})}catch(a){s(s=>(0,A._)((0,S._)({},s),{downloadStatus:(0,A._)((0,S._)({},s.downloadStatus),{[e]:"error"}),downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{[e]:0}),error:a instanceof Error?a.message:"Download failed"}))}},[]),l=(0,r.useCallback)(async()=>{try{s(e=>(0,A._)((0,S._)({},e),{isGeneratingEmbeddings:!0,error:null})),await E.FH.extractEmbeddings(),await a()}catch(e){s(s=>(0,A._)((0,S._)({},s),{error:e instanceof Error?e.message:"Failed to generate embeddings"}))}finally{s(e=>(0,A._)((0,S._)({},e),{isGeneratingEmbeddings:!1}))}},[a]),n=(0,r.useCallback)(async()=>{try{s(e=>(0,A._)((0,S._)({},e),{downloadStatus:(0,A._)((0,S._)({},e.downloadStatus),{all:"downloading"}),downloadProgress:(0,A._)((0,S._)({},e.downloadProgress),{all:0})}));let e=await E.FH.downloadAllResults(e=>{s(s=>(0,A._)((0,S._)({},s),{downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{all:e})}))});await E.mo.downloadFile(e,"training_results.zip",()=>{s(e=>(0,A._)((0,S._)({},e),{downloadStatus:(0,A._)((0,S._)({},e.downloadStatus),{all:"complete"}),downloadProgress:(0,A._)((0,S._)({},e.downloadProgress),{all:100})})),setTimeout(()=>{s(e=>(0,A._)((0,S._)({},e),{downloadStatus:(0,A._)((0,S._)({},e.downloadStatus),{all:"idle"}),downloadProgress:(0,A._)((0,S._)({},e.downloadProgress),{all:0})}))},3e3)})}catch(e){s(s=>(0,A._)((0,S._)({},s),{downloadStatus:(0,A._)((0,S._)({},s.downloadStatus),{all:"error"}),downloadProgress:(0,A._)((0,S._)({},s.downloadProgress),{all:0}),error:e instanceof Error?e.message:"Download failed"}))}},[]);return(0,r.useEffect)(()=>{a()},[a]),(0,A._)((0,S._)({},e),{downloadEmbedding:t,generateEmbeddings:l,downloadAllResults:n,refresh:a,clearError:()=>s(e=>(0,A._)((0,S._)({},e),{error:null}))})})();if(e)return(0,t.jsx)("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{children:"Loading results..."})]})});if(s)return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,t.jsxs)(j.Fc,{variant:"destructive",className:"mb-4",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsx)(j.TN,{children:s})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(m.$,{onClick:Z,children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Retry"]}),(0,t.jsx)(m.$,{variant:"outline",onClick:L,children:"Clear Error"}),(0,t.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,t.jsx)(x(),{href:"/",children:"Back to Home"})})]})]});if(!o||!p)return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,t.jsx)(j.Fc,{children:(0,t.jsx)(j.TN,{children:"No training data found. Please train a model first."})}),(0,t.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,t.jsx)(m.$,{asChild:!0,children:(0,t.jsx)(x(),{href:"/training/configure",children:"Start Training"})}),(0,t.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(x(),{href:"/",children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Back to Home"]})})]})]});let B=o.history.map(e=>({epoch:e.epoch,loss:e.loss,ari:e.ari,nmi:e.nmi,asw:e.asw}));return(0,t.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-7xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Training Results"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1 flex items-center space-x-2",children:[(0,t.jsx)("span",{children:a?"Training completed successfully":"Training in progress or incomplete"}),(0,t.jsx)(g.E,{variant:a?"default":"secondary",children:a?"✅ Complete":"⏳ In Progress"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(m.$,{variant:"outline",onClick:Z,size:"sm",disabled:e,children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(e?"animate-spin":"")}),"Refresh"]}),(0,t.jsx)(m.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(x(),{href:"/",children:[(0,t.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Home"]})})]})]}),!a&&(0,t.jsx)(j.Fc,{className:"mb-6",children:(0,t.jsxs)(j.TN,{children:["Training is not yet complete. Some results may not be available until training finishes.",(0,t.jsx)(x(),{href:"/training/monitor",className:"ml-2 text-blue-600 hover:underline",children:"Monitor training progress →"})]})}),s&&(0,t.jsxs)(j.Fc,{variant:"destructive",className:"mb-6",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsxs)(j.TN,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:s}),(0,t.jsx)(m.$,{variant:"outline",size:"sm",onClick:L,children:"Dismiss"})]})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(N,{trainingState:o,dataSummary:p}),(0,t.jsxs)(u.tU,{defaultValue:"downloads",className:"space-y-6",children:[(0,t.jsxs)(u.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsxs)(u.Xi,{value:"downloads",className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{children:"Downloads"}),b.length>0&&(0,t.jsx)(g.E,{variant:"secondary",className:"ml-1",children:b.length})]}),(0,t.jsx)(u.Xi,{value:"metrics",children:"Training Metrics"}),(0,t.jsx)(u.Xi,{value:"analysis",children:"Analysis"})]}),(0,t.jsx)(u.av,{value:"downloads",children:(0,t.jsx)(_,{availableEmbeddings:b,isGeneratingEmbeddings:v,downloadProgress:w,downloadStatus:y,onDownload:f,onDownloadAll:R,onGenerate:M,trainingCompleted:a})}),(0,t.jsx)(u.av,{value:"metrics",children:(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsxs)(h.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Training Metrics Overview"})]}),(0,t.jsxs)(h.BT,{children:["Complete training history and performance analysis (",B.length," data points)"]})]}),(0,t.jsx)(h.Wu,{children:B.length>0?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Training Overview"}),(0,t.jsx)("div",{className:"h-80",children:(0,t.jsx)(F.u,{width:"100%",height:"100%",children:(0,t.jsxs)(C.b,{data:B,children:[(0,t.jsx)(P.d,{strokeDasharray:"3 3"}),(0,t.jsx)(k.W,{dataKey:"epoch"}),(0,t.jsx)(D.h,{yAxisId:"left",orientation:"left",domain:["auto","auto"]}),(0,t.jsx)(D.h,{yAxisId:"right",orientation:"right",domain:[0,1]}),(0,t.jsx)(T.m,{formatter:(e,s)=>["number"==typeof e?e.toFixed(4):e,s.toUpperCase()]}),(0,t.jsx)(I.s,{}),(0,t.jsx)(W.N,{yAxisId:"left",type:"monotone",dataKey:"loss",stroke:"#dc2626",strokeWidth:2,name:"Loss"}),(0,t.jsx)(W.N,{yAxisId:"right",type:"monotone",dataKey:"ari",stroke:"#16a34a",strokeWidth:2,name:"ARI"}),(0,t.jsx)(W.N,{yAxisId:"right",type:"monotone",dataKey:"nmi",stroke:"#2563eb",strokeWidth:2,name:"NMI"}),(0,t.jsx)(W.N,{yAxisId:"right",type:"monotone",dataKey:"asw",stroke:"#7c3aed",strokeWidth:2,name:"ASW"})]})})})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.latest_metrics&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Zp,{className:"text-center",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:o.latest_metrics.loss.toFixed(4)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Final Loss"})]})}),(0,t.jsx)(h.Zp,{className:"text-center",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.latest_metrics.ari.toFixed(3)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Final ARI"})]})}),(0,t.jsx)(h.Zp,{className:"text-center",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.latest_metrics.nmi.toFixed(3)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Final NMI"})]})}),(0,t.jsx)(h.Zp,{className:"text-center",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:o.latest_metrics.asw.toFixed(3)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Final ASW"})]})})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Recent Training History"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm border-collapse border border-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"border border-gray-200 p-2 text-left",children:"Epoch"}),(0,t.jsx)("th",{className:"border border-gray-200 p-2 text-left",children:"Loss"}),(0,t.jsx)("th",{className:"border border-gray-200 p-2 text-left",children:"ARI"}),(0,t.jsx)("th",{className:"border border-gray-200 p-2 text-left",children:"NMI"}),(0,t.jsx)("th",{className:"border border-gray-200 p-2 text-left",children:"ASW"})]})}),(0,t.jsx)("tbody",{children:o.history.slice(-10).reverse().map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"border border-gray-200 p-2 font-medium",children:e.epoch}),(0,t.jsx)("td",{className:"border border-gray-200 p-2 text-red-600",children:e.loss.toFixed(4)}),(0,t.jsx)("td",{className:"border border-gray-200 p-2 text-green-600",children:e.ari.toFixed(3)}),(0,t.jsx)("td",{className:"border border-gray-200 p-2 text-blue-600",children:e.nmi.toFixed(3)}),(0,t.jsx)("td",{className:"border border-gray-200 p-2 text-purple-600",children:e.asw.toFixed(3)})]},e.epoch))})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(d.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"No training metrics available"})]})})]})}),(0,t.jsx)(u.av,{value:"analysis",children:(0,t.jsxs)(h.Zp,{children:[(0,t.jsxs)(h.aR,{children:[(0,t.jsx)(h.ZB,{children:"Model Analysis & Recommendations"}),(0,t.jsx)(h.BT,{children:"Interpretation and recommendations based on training results"})]}),(0,t.jsx)(h.Wu,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[o.latest_metrics&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Performance Assessment"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(h.Zp,{className:"bg-green-50 border-green-200",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("h5",{className:"font-medium text-green-800 mb-3",children:"Clustering Quality"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{children:["ARI Score (",o.latest_metrics.ari.toFixed(3),"):"]}),(0,t.jsx)(g.E,{variant:o.latest_metrics.ari>.7?"default":o.latest_metrics.ari>.4?"secondary":"destructive",children:o.latest_metrics.ari>.7?"Excellent":o.latest_metrics.ari>.4?"Good":"Needs Improvement"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{children:["NMI Score (",o.latest_metrics.nmi.toFixed(3),"):"]}),(0,t.jsx)(g.E,{variant:o.latest_metrics.nmi>.7?"default":o.latest_metrics.nmi>.4?"secondary":"destructive",children:o.latest_metrics.nmi>.7?"Excellent":o.latest_metrics.nmi>.4?"Good":"Needs Improvement"})]})]})]})}),(0,t.jsx)(h.Zp,{className:"bg-blue-50 border-blue-200",children:(0,t.jsxs)(h.Wu,{className:"p-4",children:[(0,t.jsx)("h5",{className:"font-medium text-blue-800 mb-3",children:"Embedding Quality"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{children:["Silhouette Width (",o.latest_metrics.asw.toFixed(3),"):"]}),(0,t.jsx)(g.E,{variant:o.latest_metrics.asw>.5?"default":o.latest_metrics.asw>.2?"secondary":"destructive",children:o.latest_metrics.asw>.5?"Well Separated":o.latest_metrics.asw>.2?"Moderately Separated":"Poorly Separated"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Loss Convergence:"}),(0,t.jsx)(g.E,{variant:B.length>5&&B[B.length-1].loss<.9*B[Math.max(0,B.length-6)].loss?"default":"secondary",children:B.length>5&&B[B.length-1].loss<.9*B[Math.max(0,B.length-6)].loss?"Converged":"Still Learning"})]})]})]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"Recommendations"}),(0,t.jsxs)("div",{className:"space-y-3",children:[o.latest_metrics&&(0,t.jsxs)(t.Fragment,{children:[o.latest_metrics.ari<.4&&(0,t.jsxs)(j.Fc,{children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsxs)(j.TN,{children:[(0,t.jsx)("strong",{children:"Low clustering quality detected."})," Consider increasing training epochs, adjusting regularization parameters (beta, tc), or checking data quality."]})]}),o.latest_metrics.asw<.2&&(0,t.jsxs)(j.Fc,{children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),(0,t.jsxs)(j.TN,{children:[(0,t.jsx)("strong",{children:"Poor cluster separation."})," Consider adjusting the latent dimension, beta parameter, or using different loss weights."]})]}),o.latest_metrics.ari>.7&&o.latest_metrics.nmi>.7&&(0,t.jsxs)(j.Fc,{className:"bg-green-50 border-green-200",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsxs)(j.TN,{className:"text-green-800",children:[(0,t.jsx)("strong",{children:"Excellent results!"})," Your model has learned meaningful cell clusters. The embeddings are ready for downstream analysis and publication."]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,t.jsx)("h5",{className:"font-medium mb-2",children:"\uD83D\uDD2C Next Steps for Analysis"}),(0,t.jsxs)("ul",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Download interpretable embedding"})," for 2D visualization (UMAP plots)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Download latent embedding"})," for downstream analysis (clustering, trajectory)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Visualize clusters"})," in your preferred analysis tool (Scanpy, Seurat)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Validate biological relevance"})," of discovered clusters with marker genes"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Export results"})," for collaborative analysis and publication"]})]})]})]})]})]})})]})})]})]})]})}},78485:(e,s,a)=>{Promise.resolve().then(a.bind(a,68126))}},e=>{e.O(0,[223,865,121,255,358],()=>e(e.s=78485)),_N_E=e.O()}]);